{"ast":null,"code":"import _objectSpread from\"/Users/tanishshah/Desktop/Fastpass/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{Link,useNavigate}from'react-router-dom';import{useForm}from'react-hook-form';import{useAuth}from'../contexts/AuthContext.tsx';import toast from'react-hot-toast';import LoadingSpinner from'../components/common/LoadingSpinner.tsx';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LoginPage=()=>{const{login,user}=useAuth();const navigate=useNavigate();const[loading,setLoading]=useState(false);const[loginSuccess,setLoginSuccess]=useState(false);const{register,handleSubmit,formState:{errors}}=useForm();// Redirect after successful login\nuseEffect(()=>{if(loginSuccess&&user){if(user.role==='ADMIN'){navigate('/admin');}else{navigate('/');}}},[loginSuccess,user,navigate]);const onSubmit=async data=>{setLoading(true);try{await login(data.email,data.password);toast.success('Login successful!');setLoginSuccess(true);}catch(error){var _error$response,_error$response$data;if(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.code)==='EMAIL_NOT_VERIFIED'){toast.error('Please verify your email address before logging in');}else{toast.error(error.message||'Login failed');}}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#18122B] to-[#231651] font-sans\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md w-full space-y-8 bg-black rounded-2xl shadow-2xl p-10\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center\",children:[/*#__PURE__*/_jsxs(\"svg\",{className:\"w-10 h-10 text-neon-pink mb-2\",fill:\"currentColor\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"rect\",{x:\"3\",y:\"7\",width:\"18\",height:\"10\",rx:\"3\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"8\",cy:\"12\",r:\"1.5\",fill:\"#18122B\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"16\",cy:\"12\",r:\"1.5\",fill:\"#18122B\"})]}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-extrabold text-white text-center tracking-tight mb-2\",children:\"Sign in to your account\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-center text-sm text-neon-pink font-semibold\",children:[\"Or\",' ',/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"font-bold text-neon-pink hover:text-neon-blue hover:underline hover:underline-offset-4 transition-all\",children:\"create a new account\"})]})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"mt-8 space-y-6\",onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"block text-sm font-bold text-white mb-1\",children:\"Email address\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({id:\"email\",type:\"email\",autoComplete:\"email\"},register('email',{required:'Email is required',pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,message:'Invalid email address'}})),{},{className:\"mt-1 block w-full px-4 py-3 bg-[#231651] text-white border border-[#23223a] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#23223a] font-semibold placeholder-white/60\",placeholder:\"Enter your email\"})),errors.email&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-neon-pink font-bold\",children:errors.email.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"block text-sm font-bold text-white mb-1\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({id:\"password\",type:\"password\",autoComplete:\"current-password\"},register('password',{required:'Password is required',minLength:{value:6,message:'Password must be at least 6 characters'}})),{},{className:\"mt-1 block w-full px-4 py-3 bg-[#231651] text-white border border-[#23223a] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#23223a] font-semibold placeholder-white/60\",placeholder:\"Enter your password\"})),errors.password&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-neon-pink font-bold\",children:errors.password.message})]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"group relative w-full flex justify-center py-3 px-4 rounded-full text-lg font-bold text-white bg-neon-blue hover:bg-neon-pink hover:shadow-[0_0_16px_2px_#FF1EC6] focus:outline-none focus:ring-2 focus:ring-neon-blue disabled:opacity-50 disabled:cursor-not-allowed transition-all\",children:loading?/*#__PURE__*/_jsx(LoadingSpinner,{size:\"sm\"}):'Sign in'})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-4\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"font-bold text-neon-pink hover:text-neon-blue hover:underline hover:underline-offset-4 transition-all\",children:\"Back to home\"})})]})]})});};export default LoginPage;","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","useForm","useAuth","toast","LoadingSpinner","jsx","_jsx","jsxs","_jsxs","LoginPage","login","user","navigate","loading","setLoading","loginSuccess","setLoginSuccess","register","handleSubmit","formState","errors","role","onSubmit","data","email","password","success","error","_error$response","_error$response$data","response","code","message","className","children","fill","viewBox","x","y","width","height","rx","cx","cy","r","to","htmlFor","_objectSpread","id","type","autoComplete","required","pattern","value","placeholder","minLength","disabled","size"],"sources":["/Users/tanishshah/Desktop/Fastpass/client/src/pages/LoginPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { useForm } from 'react-hook-form';\nimport { useAuth } from '../contexts/AuthContext.tsx';\nimport toast from 'react-hot-toast';\nimport LoadingSpinner from '../components/common/LoadingSpinner.tsx';\n\ninterface LoginFormData {\n  email: string;\n  password: string;\n}\n\nconst LoginPage: React.FC = () => {\n  const { login, user } = useAuth();\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(false);\n  const [loginSuccess, setLoginSuccess] = useState(false);\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n  } = useForm<LoginFormData>();\n\n  // Redirect after successful login\n  useEffect(() => {\n    if (loginSuccess && user) {\n      if (user.role === 'ADMIN') {\n        navigate('/admin');\n      } else {\n        navigate('/');\n      }\n    }\n  }, [loginSuccess, user, navigate]);\n\n  const onSubmit = async (data: LoginFormData) => {\n    setLoading(true);\n    try {\n      await login(data.email, data.password);\n      toast.success('Login successful!');\n      setLoginSuccess(true);\n    } catch (error: any) {\n      if (error.response?.data?.code === 'EMAIL_NOT_VERIFIED') {\n        toast.error('Please verify your email address before logging in');\n      } else {\n        toast.error(error.message || 'Login failed');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#18122B] to-[#231651] font-sans\">\n      <div className=\"max-w-md w-full space-y-8 bg-black rounded-2xl shadow-2xl p-10\">\n        <div className=\"flex flex-col items-center\">\n          {/* Neon pink ticket icon SVG */}\n          <svg className=\"w-10 h-10 text-neon-pink mb-2\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n            <rect x=\"3\" y=\"7\" width=\"18\" height=\"10\" rx=\"3\"/>\n            <circle cx=\"8\" cy=\"12\" r=\"1.5\" fill=\"#18122B\"/>\n            <circle cx=\"16\" cy=\"12\" r=\"1.5\" fill=\"#18122B\"/>\n          </svg>\n          <h2 className=\"text-3xl font-extrabold text-white text-center tracking-tight mb-2\">Sign in to your account</h2>\n          <p className=\"text-center text-sm text-neon-pink font-semibold\">\n            Or{' '}\n            <Link\n              to=\"/register\"\n              className=\"font-bold text-neon-pink hover:text-neon-blue hover:underline hover:underline-offset-4 transition-all\"\n            >\n              create a new account\n            </Link>\n          </p>\n        </div>\n        \n        <form className=\"mt-8 space-y-6\" onSubmit={handleSubmit(onSubmit)}>\n          <div className=\"space-y-4\">\n            <div>\n              <label htmlFor=\"email\" className=\"block text-sm font-bold text-white mb-1\">\n                Email address\n              </label>\n              <input\n                id=\"email\"\n                type=\"email\"\n                autoComplete=\"email\"\n                {...register('email', {\n                  required: 'Email is required',\n                  pattern: {\n                    value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,\n                    message: 'Invalid email address',\n                  },\n                })}\n                className={`mt-1 block w-full px-4 py-3 bg-[#231651] text-white border border-[#23223a] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#23223a] font-semibold placeholder-white/60`}\n                placeholder=\"Enter your email\"\n              />\n              {errors.email && (\n                <p className=\"mt-1 text-sm text-neon-pink font-bold\">{errors.email.message}</p>\n              )}\n            </div>\n            \n            <div>\n              <label htmlFor=\"password\" className=\"block text-sm font-bold text-white mb-1\">\n                Password\n              </label>\n              <input\n                id=\"password\"\n                type=\"password\"\n                autoComplete=\"current-password\"\n                {...register('password', {\n                  required: 'Password is required',\n                  minLength: {\n                    value: 6,\n                    message: 'Password must be at least 6 characters',\n                  },\n                })}\n                className={`mt-1 block w-full px-4 py-3 bg-[#231651] text-white border border-[#23223a] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#23223a] font-semibold placeholder-white/60`}\n                placeholder=\"Enter your password\"\n              />\n              {errors.password && (\n                <p className=\"mt-1 text-sm text-neon-pink font-bold\">{errors.password.message}</p>\n              )}\n            </div>\n          </div>\n\n          <div>\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"group relative w-full flex justify-center py-3 px-4 rounded-full text-lg font-bold text-white bg-neon-blue hover:bg-neon-pink hover:shadow-[0_0_16px_2px_#FF1EC6] focus:outline-none focus:ring-2 focus:ring-neon-blue disabled:opacity-50 disabled:cursor-not-allowed transition-all\"\n            >\n              {loading ? (\n                <LoadingSpinner size=\"sm\" />\n              ) : (\n                'Sign in'\n              )}\n            </button>\n          </div>\n\n          <div className=\"text-center mt-4\">\n            <Link\n              to=\"/\"\n              className=\"font-bold text-neon-pink hover:text-neon-blue hover:underline hover:underline-offset-4 transition-all\"\n            >\n              Back to home\n            </Link>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default LoginPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}